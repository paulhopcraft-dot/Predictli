import { Router } from 'express'; import { db } from '../../db/index.js'; export const admin=Router(); admin.get('/admin/summary', async (_req,res)=>{ const r1:any=await db.execute({sql:"select count(*)::int as c from per_candidate",params:[]} as any); const r2:any=await db.execute({sql:"select count(*)::int as c from org_job where status='open'",params:[]} as any); const r3:any=await db.execute({sql:"select count(*)::int as c from match_candidate_job",params:[]} as any); const r4:any=await db.execute({sql:"select count(*)::int as c from evt_event",params:[]} as any); res.json({ candidates: r1.rows?.[0]?.c||0, jobs: r2.rows?.[0]?.c||0, matches: r3.rows?.[0]?.c||0, events: r4.rows?.[0]?.c||0 }); });
