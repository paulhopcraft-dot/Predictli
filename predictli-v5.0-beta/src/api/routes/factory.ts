import { Router } from 'express'; import { publishEvent } from '../../events/publish.js'; import { env } from '../../config/env.js'; export const factory=Router(); factory.post('/factory/register',async(_req,res)=>{ await publishEvent('factory.module_registered',{module:env.FACTORY_MODULE_ID}); res.json({ok:true}); }); factory.post('/factory/telemetry',async(req,res)=>{ const {metric,value,meta}=req.body||{}; await publishEvent('factory.telemetry',{metric,value,meta}); res.json({ok:true}); });
